{"version":3,"sources":["containers/HotPosts/HotPosts.js","components/showHotPosts/showHotPosts.js"],"names":["HotPosts","state","postsCount","hotPosts","page","loadedPages","cancelRequest","onGetHotPosts","lastPages","wasLoad","find","el","push","setState","axios","get","cancelToken","CancelToken","c","setCancelFunc","then","res","cancelFunc","data","posts","prevPosts","concat","console","log","prevState","catch","err","window","scrollTo","this","loadMore","darkMode","props","Component","connect","showHotPosts","dataLength","length","next","loader","post","isLast","hasMore","map","index","key"],"mappings":"wNAMMA,E,4MACJC,MAAQ,CACNC,WAAY,IACZC,SAAU,GACVC,KAAM,EACNC,YAAa,GACbC,cAAe,M,EAQjBC,cAAgB,SAACH,GACf,IAAMI,EAAS,YAAO,EAAKP,MAAMI,aAE3BI,EAAUD,EAAUE,MAAK,SAACC,GAAD,OAAQA,IAAOP,KAC1CK,IACFD,EAAUI,KAAKR,GACf,EAAKS,SAAS,CAAER,YAAaG,KAQ1BC,GACHK,IACGC,IADH,6DAE0D,EAAKd,MAAMC,WAFrE,iBAEwFE,GACpF,CACEY,YAAa,IAAIF,IAAMG,aAAY,SAAaC,IATlC,SAACA,GACrB,EAAKL,SAAS,CAACP,cAAeY,IAStBC,CAAcD,QAInBE,MAAK,SAACC,GAGL,OAFA,EAAKR,SAAS,CAAEP,mBAjBlBgB,IAmBSD,EAAIE,QAEZH,MAAK,SAACI,GACL,IAAMC,EAAS,YAAO,EAAKxB,MAAME,UACjC,EAAKU,SAAS,CAAEV,SAAUsB,EAAUC,OAAOF,KAC3CG,QAAQC,IAAI,oBAEbR,MAAK,WACJ,EAAKP,UAAS,SAACgB,GAAD,MAAgB,CAAEzB,KAAMyB,EAAUzB,KAAO,MACvDI,EAAUI,KAAKR,MAEhB0B,OAAM,SAACC,GAAD,OAASJ,QAAQC,IAAIG,O,kEA1ChCC,OAAOC,SAAS,EAAG,GACnBC,KAAK3B,cAAc2B,KAAKjC,MAAMG,Q,+BA8C9B,OACE,oCACE,kBAAC,IAAD,CACED,SAAU+B,KAAKjC,MAAME,SACrBgC,SAAUD,KAAK3B,cACfL,WAAYgC,KAAKjC,MAAMC,WACvBkC,SAAUF,KAAKG,MAAMD,SACrBhC,KAAM8B,KAAKjC,MAAMG,Y,GAhEJkC,aA2ERC,uBAJS,SAAAtC,GAAK,MAAK,CAChCmC,SAAUnC,EAAMmC,YAGHG,CAAyBvC,I,gCCjFxC,4CA8CewC,IAvCM,SAACH,GACpB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEI,WAAYJ,EAAMlC,SAASuC,OAC3BC,KAAM,WACJN,EAAMF,SAASE,EAAMjC,MACrBuB,QAAQC,IAAI,SAEdgB,OACiB,IAAfP,EAAMjC,KACJ,oCACE,kBAAC,IAAD,CAAUyC,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,IACtD,kBAAC,IAAD,CAAUD,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,IACtD,kBAAC,IAAD,CAAUD,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,IACtD,kBAAC,IAAD,CAAUD,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,IACtD,kBAAC,IAAD,CAAUD,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,KAGxD,oCACE,kBAAC,IAAD,CAAUD,KAAM,GAAIT,SAAUC,EAAMD,SAAUU,QAAQ,KAI5DC,QAASV,EAAMlC,SAASuC,OAASL,EAAMnC,YAEtCmC,EAAMlC,SAAS6C,KAAI,SAACrC,EAAIsC,GAAL,OAClB,kBAAC,IAAD,CACEC,IAAKD,EACLJ,KAAMlC,EACNyB,SAAUC,EAAMD,SAChBU,OAAQG,IAAUZ,EAAMlC,SAASuC,OAAS","file":"static/js/6.55e98581.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport ShowHotPosts from \"../../components/showHotPosts/showHotPosts\";\r\n\r\nclass HotPosts extends Component {\r\n  state = {\r\n    postsCount: 1000,\r\n    hotPosts: [],\r\n    page: 1,\r\n    loadedPages: [],\r\n    cancelRequest: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0, 0);\r\n    this.onGetHotPosts(this.state.page);\r\n  }\r\n\r\n  onGetHotPosts = (page) => {\r\n    const lastPages = [...this.state.loadedPages];\r\n    // console.log(this.state.loadedPages)\r\n    const wasLoad = lastPages.find((el) => el === page);\r\n    if(!wasLoad) {\r\n      lastPages.push(page);\r\n      this.setState({ loadedPages: lastPages });\r\n    }\r\n    let cancelFunc;\r\n\r\n    const setCancelFunc = (c) => {\r\n      this.setState({cancelRequest: c});\r\n    }\r\n\r\n    if (!wasLoad) {\r\n      axios\r\n        .get(\r\n          `https://zoomitlist.herokuapp.com/a/hot-posts?limit=${this.state.postsCount}&page=${page}`,\r\n          {\r\n            cancelToken: new axios.CancelToken(function exe(c) {\r\n              setCancelFunc(c);\r\n            }),\r\n          }\r\n        )\r\n        .then((res) => {\r\n          this.setState({ cancelRequest: cancelFunc });\r\n\r\n          return res.data;\r\n        })\r\n        .then((posts) => {\r\n          const prevPosts = [...this.state.hotPosts];\r\n          this.setState({ hotPosts: prevPosts.concat(posts) });\r\n          console.log(\"Got new Posts\");\r\n        })\r\n        .then(() => {\r\n          this.setState((prevState) => ({ page: prevState.page + 1 }));\r\n          lastPages.push(page);\r\n        })\r\n        .catch((err) => console.log(err));\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <ShowHotPosts\r\n          hotPosts={this.state.hotPosts}\r\n          loadMore={this.onGetHotPosts}\r\n          postsCount={this.state.postsCount}\r\n          darkMode={this.props.darkMode}\r\n          page={this.state.page}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  darkMode: state.darkMode\r\n})\r\n\r\nexport default connect(mapStateToProps)(HotPosts);\r\n","import React from \"react\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nimport PostItem from \"../../components/UI/postItem/postItem\";\r\n// import StyleSheet from \"./showHotPosts.module.css\";\r\nimport Main from \"../UI/mainDiv/mainDiv\";\r\n\r\nconst showHotPosts = (props) => {\r\n  return (\r\n    <Main>\r\n      <InfiniteScroll\r\n        dataLength={props.hotPosts.length}\r\n        next={() => {\r\n          props.loadMore(props.page);\r\n          console.log(\"l 12\");\r\n        }}\r\n        loader={\r\n          props.page === 1 ? (\r\n            <>\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <PostItem post={{}} darkMode={props.darkMode} isLast={true} />\r\n            </>\r\n          )\r\n        }\r\n        hasMore={props.hotPosts.length < props.postsCount}\r\n      >\r\n        {props.hotPosts.map((el, index) => (\r\n          <PostItem\r\n            key={index}\r\n            post={el}\r\n            darkMode={props.darkMode}\r\n            isLast={index === props.hotPosts.length - 1}\r\n          />\r\n        ))}\r\n      </InfiniteScroll>\r\n    </Main>\r\n  );\r\n};\r\n\r\nexport default showHotPosts;\r\n"],"sourceRoot":""}